<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Block Puzzle</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        h1 {
            color: #3b82f6;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .instructions {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            text-align: left;
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }

        .instructions:hover {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        .instructions h2 {
            color: #3b82f6;
            margin-top: 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 8px;
            font-size: 1.5rem;
        }

        .instructions ul {
            margin: 0;
            padding-left: 20px;
        }

        .instructions li {
            margin: 10px 0;
            position: relative;
            padding-left: 5px;
        }

        .instructions li::before {
            content: "â€¢";
            color: #3b82f6;
            font-weight: bold;
            display: inline-block;
            margin-right: 8px;
        }

        .game-container {
            background-color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-item {
            background-color: #f0f9ff;
            padding: 12px;
            border-radius: 8px;
            font-weight: 500;
            border: 1px solid #bfdbfe;
            transition: all 0.2s ease;
            color: #2563eb;
        }

        .stat-item:hover {
            background-color: #e0f2fe;
            transform: translateY(-2px);
        }

        .grid {
            display: inline-block;
            background-color: #eff6ff;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid #bfdbfe;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .row {
            display: flex;
            margin-bottom: 6px;
        }

        .row:last-child {
            margin-bottom: 0;
        }

        .cell {
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            font-weight: bold;
            background-color: white;
            border: 2px solid #3b82f6;
            margin: 3px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            color: #1e40af;
        }

        .cell:hover {
            background-color: #e0f2fe;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .cell.selected {
            background-color: #3b82f6;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.4);
            border-color: #1e40af;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: 0.6s;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover:not(:disabled) {
            background-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
        }

        button:active:not(:disabled) {
            transform: translateY(1px);
            box-shadow: 0 2px 3px rgba(37, 99, 235, 0.3);
        }

        button:disabled {
            background-color: #cbd5e1;
            cursor: not-allowed;
            color: #94a3b8;
            box-shadow: none;
        }

        .word-list {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.03);
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f8fafc;
        }

        .word-list::-webkit-scrollbar {
            width: 6px;
        }

        .word-list::-webkit-scrollbar-track {
            background: #f8fafc;
        }

        .word-list::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 10px;
        }

        .word-list h3 {
            margin-top: 0;
            color: #3b82f6;
            font-size: 1.25rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        .word-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .word-list li {
            background-color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s ease;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            color: #1e3a8a;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .word-list li:hover {
            background-color: #eff6ff;
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-color: #bfdbfe;
        }

        .toast-message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #3b82f6;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            animation: fadeInOut 3s ease;
            text-align: center;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, 20px); }
            10% { opacity: 1; transform: translate(-50%, 0); }
            90% { opacity: 1; transform: translate(-50%, 0); }
            100% { opacity: 0; transform: translate(-50%, -20px); }
        }

        @media (max-width: 600px) {
            .cell {
                width: 45px;
                height: 45px;
                font-size: 22px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .word-list ul {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }

            .controls {
                flex-wrap: wrap;
            }

            button {
                flex: 1;
                min-width: 120px;
                padding: 10px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Word Block Puzzle</h1>
        <div class="instructions">
            <h2>How to Play</h2>
            <ul>
                <li>Find words in the grid by connecting letters horizontally, vertically, or diagonally.</li>
                <li>Words must be at least 3 letters long.</li>
                <li>You can swap any two letters to create new words.</li>
                <li>Click "Submit" to check your words and calculate your score.</li>
                <li>Longer words earn more points!</li>
            </ul>
        </div>
    <div id="root"></div>
    </div>

    <script type="text/babel">
        // Load dictionary
        const DICTIONARY = new Set([
            // Common 3-letter words
            'ace', 'act', 'add', 'age', 'ago', 'aid', 'air', 'all', 'and', 'any', 'arm', 'art', 'ask', 'ate',
            'bad', 'bag', 'ban', 'bar', 'bat', 'bay', 'bed', 'bee', 'beg', 'bet', 'bid', 'big', 'bit', 'box',
            'boy', 'bug', 'bus', 'but', 'buy', 'cab', 'can', 'cap', 'car', 'cat', 'cow', 'cry', 'cup', 'cut',
            'dad', 'day', 'die', 'dig', 'dim', 'dip', 'dog', 'dot', 'dry', 'due', 'dug', 'ear', 'eat', 'egg',
            'end', 'eye', 'fan', 'far', 'fat', 'fee', 'few', 'fig', 'fit', 'fix', 'fly', 'fog', 'for', 'fox',
            'fun', 'fur', 'gap', 'gas', 'get', 'god', 'got', 'gum', 'gun', 'gut', 'guy', 'gym', 'had', 'ham',
            'has', 'hat', 'hay', 'hem', 'hen', 'her', 'hey', 'hid', 'him', 'hip', 'hit', 'hop', 'hot', 'how',
            'hub', 'hug', 'hut', 'ice', 'ink', 'inn', 'jam', 'jar', 'jaw', 'jet', 'job', 'jog', 'joy', 'key',
            'kid', 'kit', 'lab', 'lag', 'lap', 'law', 'lay', 'led', 'leg', 'let', 'lid', 'lie', 'lip', 'lit',
            'log', 'lot', 'low', 'mad', 'man', 'map', 'mat', 'may', 'men', 'met', 'mix', 'mob', 'mom', 'mop',
            'mud', 'mug', 'nap', 'net', 'new', 'nod', 'not', 'now', 'nun', 'nut', 'oak', 'odd', 'off', 'oil',
            'old', 'one', 'our', 'out', 'owl', 'own', 'pad', 'pan', 'pat', 'pay', 'pen', 'pet', 'pie', 'pig',
            'pin', 'pit', 'pop', 'pot', 'put', 'rad', 'rag', 'ram', 'ran', 'rap', 'rat', 'raw', 'ray', 'red',
            'rib', 'rid', 'rig', 'rim', 'rip', 'rob', 'rod', 'rot', 'row', 'rub', 'rug', 'rum', 'run', 'sad',
            'sag', 'saw', 'say', 'sea', 'see', 'set', 'sew', 'she', 'shy', 'sin', 'sip', 'sir', 'sit', 'six',
            'ski', 'sky', 'sly', 'son', 'spy', 'sum', 'sun', 'tab', 'tag', 'tan', 'tap', 'tar', 'tax', 'tea',
            'ten', 'the', 'tie', 'tin', 'tip', 'toe', 'ton', 'too', 'top', 'toy', 'try', 'tub', 'two', 'use',
            'van', 'vat', 'vet', 'vow', 'wag', 'war', 'was', 'wax', 'way', 'web', 'wed', 'wet', 'who', 'why',
            'wig', 'win', 'wit', 'won', 'wow', 'yes', 'yet', 'you', 'zip', 'zoo',
            // Additional 3-letter words
            'abs', 'aft', 'aim', 'ale', 'amp', 'ant', 'ape', 'apt', 'arc', 'ark', 'ash', 'awl', 'awn', 'axe',
            'baa', 'bah', 'bam', 'bib', 'bin', 'boa', 'bob', 'bog', 'boo', 'bow', 'bra', 'bud', 'bum', 'bun',
            'bye', 'cad', 'cam', 'chi', 'cob', 'cod', 'cog', 'col', 'con', 'coo', 'cop', 'cot', 'coy', 'cub', 
            'cud', 'cue', 'dab', 'dam', 'dew', 'dib', 'din', 'doe', 'don', 'dub', 'duo', 'dye', 'ebb', 'elf', 
            'elk', 'elm', 'emu', 'era', 'erg', 'err', 'ewe', 'fab', 'fad', 'fax', 'fez', 'fib', 'fin', 'fir',
            'flu', 'foe', 'fop', 'fps', 'fry', 'gab', 'gag', 'gal', 'gel', 'gem', 'gin', 'gnu', 'goo', 'gum',
            
            // Common 4-letter words
            'able', 'acid', 'aged', 'also', 'area', 'army', 'away', 'baby', 'back', 'ball', 'band', 'bank',
            'base', 'bath', 'bear', 'beat', 'been', 'beer', 'bell', 'belt', 'best', 'bird', 'bite', 'blow',
            'blue', 'boat', 'body', 'bomb', 'bond', 'bone', 'book', 'boom', 'born', 'boss', 'both', 'bowl',
            'bulk', 'burn', 'bush', 'busy', 'call', 'calm', 'came', 'camp', 'card', 'care', 'case', 'cash',
            'cast', 'cell', 'chat', 'chip', 'city', 'club', 'coal', 'coat', 'code', 'cold', 'come', 'cook',
            'cool', 'cope', 'copy', 'core', 'cost', 'crew', 'crop', 'dark', 'data', 'date', 'dawn', 'days',
            'dead', 'deal', 'dear', 'debt', 'deep', 'deny', 'desk', 'dial', 'diet', 'dirt', 'disc', 'dish',
            'disk', 'does', 'done', 'door', 'dose', 'down', 'draw', 'drop', 'drug', 'drum', 'dual', 'duke',
            'dust', 'duty', 'each', 'earn', 'ease', 'east', 'easy', 'edge', 'else', 'even', 'ever', 'evil',
            'exit', 'face', 'fact', 'fade', 'fail', 'fair', 'fall', 'fame', 'farm', 'fast', 'fate', 'fear',
            'feed', 'feel', 'feet', 'fell', 'felt', 'file', 'fill', 'film', 'find', 'fine', 'fire', 'firm',
            'fish', 'five', 'flat', 'flow', 'fold', 'folk', 'food', 'fool', 'foot', 'ford', 'form', 'fort',
            'four', 'free', 'from', 'fuel', 'full', 'fund', 'gain', 'game', 'gate', 'gave', 'gear', 'gift',
            'girl', 'give', 'glad', 'goal', 'goes', 'gold', 'golf', 'gone', 'good', 'gray', 'grew', 'grey',
            'grow', 'gulf', 'hair', 'half', 'hall', 'hand', 'hang', 'hard', 'harm', 'hate', 'have', 'head',
            'hear', 'heat', 'held', 'hell', 'help', 'here', 'hero', 'high', 'hill', 'hire', 'hold', 'hole',
            'holy', 'home', 'hope', 'host', 'hour', 'huge', 'hung', 'hunt', 'hurt', 'idea', 'inch', 'into',
            'iron', 'item', 'join', 'jump', 'jury', 'just', 'keen', 'keep', 'kept', 'kick', 'kill', 'kind',
            'king', 'knee', 'knew', 'know', 'lack', 'lady', 'laid', 'lake', 'land', 'lane', 'last', 'late',
            'lead', 'left', 'less', 'life', 'lift', 'like', 'line', 'link', 'list', 'live', 'load', 'loan',
            'lock', 'logo', 'long', 'look', 'lord', 'lose', 'loss', 'lost', 'love', 'luck', 'made', 'mail',
            'main', 'make', 'male', 'many', 'mark', 'mass', 'matt', 'meal', 'mean', 'meat', 'meet', 'menu',
            'mere', 'mile', 'milk', 'mill', 'mind', 'mine', 'miss', 'mode', 'mood', 'moon', 'more', 'most',
            'move', 'much', 'must', 'name', 'navy', 'near', 'neck', 'need', 'news', 'next', 'nice', 'nick',
            'nine', 'none', 'nose', 'note', 'okay', 'once', 'only', 'onto', 'open', 'oral', 'over', 'pace',
            'pack', 'page', 'paid', 'pain', 'pair', 'palm', 'park', 'part', 'pass', 'past', 'path', 'peak',
            'pick', 'pink', 'pipe', 'plan', 'play', 'plot', 'plus', 'poll', 'pool', 'poor', 'port', 'post',
            'pull', 'pure', 'push', 'race', 'rail', 'rain', 'rank', 'rare', 'rate', 'read', 'real', 'rear',
            'rely', 'rent', 'rest', 'rice', 'rich', 'ride', 'ring', 'rise', 'risk', 'road', 'rock', 'role',
            'roll', 'roof', 'room', 'root', 'rose', 'rule', 'rush', 'ruth', 'safe', 'said', 'sake', 'sale',
            'salt', 'same', 'sand', 'save', 'seat', 'seed', 'seek', 'seem', 'seen', 'self', 'sell', 'send',
            'sent', 'ship', 'shop', 'shot', 'show', 'shut', 'sick', 'side', 'sign', 'site', 'size', 'skin',
            'slip', 'slow', 'snow', 'soft', 'soil', 'sold', 'sole', 'some', 'song', 'soon', 'sort', 'soul',
            'spot', 'star', 'stay', 'step', 'stop', 'such', 'suit', 'sure', 'take', 'tale', 'talk', 'tall',
            'tank', 'tape', 'task', 'team', 'tech', 'tell', 'tend', 'term', 'test', 'text', 'than', 'that',
            'them', 'then', 'they', 'thin', 'this', 'thus', 'time', 'tiny', 'told', 'toll', 'tone', 'took',
            'tool', 'tour', 'town', 'tree', 'trip', 'true', 'tune', 'turn', 'twin', 'type', 'unit', 'upon',
            'used', 'user', 'vary', 'vast', 'very', 'vice', 'view', 'vote', 'wage', 'wait', 'wake', 'walk',
            'wall', 'want', 'ward', 'warm', 'wash', 'wave', 'ways', 'weak', 'wear', 'week', 'well', 'went',
            'were', 'west', 'what', 'when', 'whom', 'wide', 'wife', 'wild', 'will', 'wind', 'wine', 'wing',
            'wire', 'wise', 'wish', 'with', 'wood', 'word', 'wore', 'work', 'yard', 'yeah', 'year', 'your',
            'zero', 'zone',
            // Additional 4-letter words
            'abbe', 'abed', 'ably', 'abut', 'ache', 'achy', 'acme', 'acne', 'acre', 'acts', 'adam', 'adds',
            'adit', 'ados', 'afar', 'afro', 'agar', 'aged', 'ages', 'agog', 'ague', 'ahem', 'ahoy', 'aide',
            'aids', 'ails', 'aims', 'airs', 'airy', 'ajar', 'akin', 'alas', 'albs', 'alef', 'ales', 'alfa',
            'alga', 'ally', 'alma', 'alms', 'aloe', 'alps', 'alto', 'alum', 'ambo', 'amen', 'amid', 'ammo',
            'amok', 'amps', 'amyl', 'anal', 'andy', 'anew', 'ankh', 'anna', 'anon', 'ante', 'anti', 'ants',
            'anus', 'aped', 'apes', 'apex', 'apse', 'aqua', 'arch', 'arcs', 'ardu', 'area', 'ares', 'aria',
            'arid', 'arks', 'arms', 'army', 'arts', 'arty', 'asap', 'ashy', 'asia', 'asks', 'asps', 'atom',
            'atop', 'aunt', 'aura', 'auto', 'avid', 'avow', 'away', 'awls', 'awns', 'awol', 'awry', 'axed',
            'axes', 'axis', 'axle', 'axon', 'baal', 'babe', 'baby', 'bach', 'back', 'bade', 'bags', 'baht',
            'bail', 'bait', 'bake', 'bald', 'bale', 'balk', 'ball', 'balm', 'band', 'bane', 'bang', 'bank',
            
            // Common 5-letter words
            'about', 'above', 'abuse', 'actor', 'acute', 'admit', 'adopt', 'adult', 'after', 'again', 'agent',
            'agree', 'ahead', 'alarm', 'album', 'alert', 'alike', 'alive', 'allow', 'alone', 'along', 'alter',
            'among', 'anger', 'angle', 'angry', 'apart', 'apple', 'apply', 'arena', 'argue', 'arise', 'array',
            'aside', 'asset', 'audio', 'audit', 'avoid', 'award', 'aware', 'badly', 'baker', 'bases', 'basic',
            'basis', 'beach', 'began', 'begin', 'begun', 'being', 'below', 'bench', 'billy', 'birth', 'black',
            'blame', 'blank', 'blast', 'bleed', 'blend', 'bless', 'blind', 'block', 'blood', 'board', 'boost',
            'booth', 'bound', 'brain', 'brand', 'bread', 'break', 'breed', 'brief', 'bring', 'broad', 'broke',
            'brown', 'build', 'built', 'buyer', 'cable', 'carry', 'catch', 'cause', 'chain', 'chair', 'chart',
            'chase', 'cheap', 'check', 'chest', 'chief', 'child', 'china', 'chose', 'civil', 'claim', 'class',
            'clean', 'clear', 'click', 'clock', 'close', 'coach', 'coast', 'could', 'count', 'court', 'cover',
            'craft', 'crash', 'cream', 'crime', 'cross', 'crowd', 'crown', 'curve', 'cycle', 'daily', 'dance',
            'dated', 'dealt', 'death', 'debut', 'delay', 'depth', 'doing', 'doubt', 'dozen', 'draft', 'drama',
            'drawn', 'dream', 'dress', 'drill', 'drink', 'drive', 'drove', 'dying', 'eager', 'early', 'earth',
            'eight', 'elite', 'empty', 'enemy', 'enjoy', 'enter', 'entry', 'equal', 'error', 'event', 'every',
            'exact', 'exist', 'extra', 'faith', 'false', 'fault', 'fiber', 'field', 'fifth', 'fifty', 'fight',
            'final', 'first', 'fixed', 'flash', 'fleet', 'floor', 'fluid', 'focus', 'force', 'forth', 'forty',
            'forum', 'found', 'frame', 'frank', 'fraud', 'fresh', 'front', 'fruit', 'fully', 'funny', 'giant',
            'given', 'glass', 'globe', 'glory', 'grace', 'grade', 'grain', 'grand', 'grant', 'grass', 'grave',
            'great', 'green', 'greet', 'grief', 'gross', 'group', 'grown', 'guard', 'guess', 'guest', 'guide',
            'habit', 'happy', 'hardy', 'heart', 'heavy', 'hence', 'honey', 'honor', 'horse', 'hotel', 'house',
            'human', 'ideal', 'image', 'index', 'inner', 'input', 'issue', 'joint', 'judge', 'juice', 'knife',
            'knock', 'label', 'labor', 'large', 'later', 'laugh', 'layer', 'learn', 'lease', 'least', 'leave',
            'legal', 'level', 'light', 'limit', 'local', 'logic', 'loose', 'lower', 'lucky', 'lunch', 'magic',
            'major', 'maker', 'march', 'match', 'maybe', 'mayor', 'meant', 'media', 'mercy', 'merge', 'merit',
            'metal', 'meter', 'might', 'minor', 'minus', 'mixed', 'model', 'money', 'month', 'moral', 'motor',
            'mount', 'mouse', 'mouth', 'movie', 'music', 'naked', 'named', 'nasty', 'nerve', 'never', 'night',
            'noble', 'noise', 'north', 'noted', 'novel', 'nurse', 'ocean', 'offer', 'often', 'olive', 'onion',
            'opera', 'orbit', 'order', 'other', 'outer', 'owner', 'paint', 'panel', 'panic', 'paper', 'party',
            'paste', 'patch', 'pause', 'peace', 'phase', 'phone', 'photo', 'piano', 'piece', 'pilot', 'pitch',
            'place', 'plain', 'plane', 'plant', 'plate', 'plaza', 'point', 'pound', 'power', 'press', 'price',
            'pride', 'prime', 'print', 'prior', 'prize', 'proof', 'proud', 'prove', 'pulse', 'punch', 'purge',
            'queen', 'quick', 'quiet', 'quite', 'quote', 'radio', 'raise', 'rally', 'range', 'rapid', 'ratio',
            'reach', 'ready', 'refer', 'relax', 'reply', 'right', 'rigid', 'rival', 'river', 'robot', 'round',
            'route', 'royal', 'rural', 'sadly', 'saint', 'salad', 'scale', 'scare', 'scene', 'scope', 'score',
            'scout', 'scrap', 'screw', 'sense', 'serve', 'setup', 'seven', 'shade', 'shake', 'shall', 'shame',
            'shape', 'share', 'sharp', 'sheep', 'sheet', 'shelf', 'shell', 'shift', 'shine', 'shirt', 'shock',
            'shoot', 'shore', 'short', 'shout', 'shown', 'sight', 'silly', 'since', 'sixth', 'sixty', 'skill',
            'sleep', 'slice', 'slide', 'slope', 'small', 'smart', 'smile', 'smoke', 'snake', 'solar', 'solid',
            'solve', 'sorry', 'sound', 'south', 'space', 'spare', 'spark', 'speak', 'speed', 'spell', 'spend',
            'spent', 'spice', 'spike', 'spine', 'spite', 'split', 'spoil', 'spoke', 'sport', 'spray', 'staff',
            'stage', 'stamp', 'stand', 'stare', 'start', 'state', 'steam', 'steel', 'steep', 'stick', 'still',
            'stock', 'stone', 'store', 'storm', 'story', 'stove', 'strap', 'strip', 'stuck', 'study', 'stuff',
            'style', 'sugar', 'suite', 'sunny', 'super', 'swear', 'sweet', 'swift', 'swing', 'sword', 'table',
            'taken', 'taste', 'taxes', 'teach', 'teeth', 'thank', 'theft', 'their', 'theme', 'there', 'these',
            'thick', 'thief', 'thing', 'think', 'third', 'those', 'three', 'threw', 'throw', 'thumb', 'tiger',
            'tight', 'timer', 'tired', 'title', 'today', 'token', 'tooth', 'topic', 'total', 'touch', 'tough',
            'towel', 'tower', 'trace', 'track', 'trade', 'trail', 'train', 'trend', 'trial', 'tribe', 'trick',
            'tried', 'truck', 'truly', 'trunk', 'trust', 'truth', 'twice', 'twist', 'uncle', 'under', 'union',
            'unite', 'unity', 'until', 'upper', 'upset', 'urban', 'usage', 'usual', 'valid', 'value', 'video',
            'virus', 'visit', 'vital', 'voice', 'waste', 'watch', 'water', 'weigh', 'weird', 'whale', 'wheat',
            'wheel', 'where', 'which', 'while', 'white', 'whole', 'whose', 'width', 'woman', 'world', 'worry',
            'worse', 'worst', 'worth', 'would', 'wound', 'wreck', 'write', 'wrong', 'wrote', 'yield', 'young',
            'youth',
            // Additional 5-letter words
            'aback', 'abaft', 'abase', 'abash', 'abate', 'abbey', 'abbot', 'abhor', 'abide', 'abode', 'abort',
            'acorn', 'acrid', 'actor', 'adage', 'adapt', 'added', 'adder', 'addle', 'adept', 'adieu', 'admit',
            'admix', 'adobe', 'adopt', 'adore', 'adorn', 'affix', 'afire', 'afoot', 'afoul', 'afrit', 'after',
            'again', 'agape', 'agate', 'agent', 'aggro', 'agile', 'aging', 'aglow', 'agony', 'agree', 'ahead',
            'aider', 'aisle', 'alarm', 'album', 'alder', 'aleph', 'alert', 'algae', 'algal', 'alias', 'alibi',
            'alien', 'align', 'alike', 'allay', 'allen', 'alley', 'allot', 'allow', 'alloy', 'aloft', 'aloha',
            'alpha', 'altar', 'alter', 'amass', 'amaze', 'amber', 'amble', 'amend', 'amity', 'among', 'amour',
            'ample', 'amply', 'amuse', 'angel', 'anger', 'angle', 'angry', 'angst', 'anima', 'anime', 'ankle',
            'annex', 'annoy', 'annul', 'anode', 'antic', 'anvil', 'aorta', 'apart', 'aphid', 'apnea', 'apple',
            'apply', 'apron', 'aptly', 'arbor', 'ardor', 'areal', 'arena', 'argon', 'argue', 'arise', 'armor',
            
            // Original dictionary entries
            'the', 'and', 'for', 'are', 'but', 'not', 'you', 'all', 'any', 'can', 'had', 'her',
            // ... rest of the dictionary words ...
            'yield', 'young', 'youth'
        ]);

        // Helper function to generate random letters with weighted distribution
        function generateRandomLetter() {
            const vowels = 'aeiou';
            const consonants = 'bcdfghjklmnpqrstvwxyz';
            const weights = {
                vowels: 0.4,
                consonants: 0.6
            };
            
            const random = Math.random();
            if (random < weights.vowels) {
                return vowels[Math.floor(Math.random() * vowels.length)];
            } else {
                return consonants[Math.floor(Math.random() * consonants.length)];
            }
        }

        // Helper function to check if a word exists in the dictionary
        function isValidWord(word) {
            // Only accept words that exist in our dictionary
            return DICTIONARY.has(word.toLowerCase());
        }

        // Helper function to check and add a word if it's valid
        function checkAndAddWord(word, foundWords) {
            if (word.length >= 3 && isValidWord(word)) {
                foundWords.add(word.toLowerCase());
            }
        }

        function WordGridGame() {
            const [grid, setGrid] = React.useState([]);
            const [selectedCells, setSelectedCells] = React.useState([]);
            const [foundWords, setFoundWords] = React.useState(new Set());
            const [score, setScore] = React.useState(0);
            const [highScore, setHighScore] = React.useState(() => {
                const saved = localStorage.getItem('wordBlockHighScore');
                return saved ? parseInt(saved) : 0;
            });
            const [time, setTime] = React.useState(0);
            const [isTimerRunning, setIsTimerRunning] = React.useState(false);
            const [swapsRemaining, setSwapsRemaining] = React.useState(5);
            const [shareMessage, setShareMessage] = React.useState('');
            const [showShareToast, setShowShareToast] = React.useState(false);

            // Timer effect
            React.useEffect(() => {
                let interval;
                if (isTimerRunning) {
                    interval = setInterval(() => {
                        setTime(prevTime => prevTime + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isTimerRunning]);

            // Format time as MM:SS
            const formatTime = (seconds) => {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            };

            // Start timer
            const startTimer = () => {
                setIsTimerRunning(true);
            };

            // Stop timer
            const stopTimer = () => {
                setIsTimerRunning(false);
            };

            // Update high score
            const updateHighScore = (newScore) => {
                if (newScore > highScore) {
                    setHighScore(newScore);
                    localStorage.setItem('wordBlockHighScore', newScore);
                }
            };

            // Generate a deterministic seed for a given date
            const generateDailySeed = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const day = date.getDate();
                return year * 10000 + month * 100 + day;
            };

            // Pseudo-random number generator with seed
            const seededRandom = (seed) => {
                const x = Math.sin(seed++) * 10000;
                return x - Math.floor(x);
            };

            // Generate a letter using seeded random generator
            const generateSeededLetter = (seed) => {
                const vowels = 'aeiou';
                const consonants = 'bcdfghjklmnpqrstvwxyz';
                const weights = {
                    vowels: 0.4,
                    consonants: 0.6
                };
                
                const random = seededRandom(seed);
                if (random < weights.vowels) {
                    return vowels[Math.floor(seededRandom(seed + 1) * vowels.length)];
                } else {
                    return consonants[Math.floor(seededRandom(seed + 2) * consonants.length)];
                }
            };
            
            // Initialize grid effect
            React.useEffect(() => {
                console.log("Initializing grid...");
                const today = new Date();
                const seed = generateDailySeed(today);
                const newGrid = Array(5).fill().map(() => Array(5).fill(''));
                
                let seedOffset = 0;
                for (let i = 0; i < 5; i++) {
                    for (let j = 0; j < 5; j++) {
                        const letter = generateSeededLetter(seed + seedOffset).toUpperCase();
                        newGrid[i][j] = letter;
                        seedOffset++;
                    }
                }
                
                console.log("Grid initialized:", newGrid);
                setGrid(newGrid);
                setIsTimerRunning(true);
                setSwapsRemaining(5);
            }, []);

            // Find all words in the grid
            const findAllWords = () => {
                const words = new Set();
                const directions = [
                    [0, 1], [1, 0], [1, 1], [-1, 1],
                    [0, -1], [-1, 0], [-1, -1], [1, -1]
                ];

                console.log("Starting to search for words in grid:", grid);

                const checkWord = (startRow, startCol, dx, dy) => {
                    let word = '';
                    let r = startRow;
                    let c = startCol;

                    while (word.length < 5 && r >= 0 && r < 5 && c >= 0 && c < 5) {
                        word += grid[r][c];
                        
                        if (word.length >= 3) {
                            const isValid = isValidWord(word);
                            console.log(`Checking word: ${word}, Valid: ${isValid}`);
                            if (isValid) {
                                words.add(word.toUpperCase());
                            }
                        }
                        
                        r += dx;
                        c += dy;
                    }
                };

                for (let row = 0; row < 5; row++) {
                    for (let col = 0; col < 5; col++) {
                        for (const [dx, dy] of directions) {
                            checkWord(row, col, dx, dy);
                        }
                    }
                }

                console.log("Found all words:", Array.from(words));
                return words;
            };

            // Calculate score based on found words
            const calculateScore = (words) => {
                let totalScore = 0;
                words.forEach(word => {
                    if (word.length === 3) totalScore += 1;
                    else if (word.length === 4) totalScore += 2;
                    else if (word.length >= 5) totalScore += 4;
                });
                return totalScore;
            };

            // Handle cell selection
            const handleCellClick = (row, col) => {
                const cellIndex = row * 5 + col;
                if (!selectedCells.includes(cellIndex)) {
                    setSelectedCells([...selectedCells, cellIndex]);
                }
            };

            // Handle swap
            const handleSwap = () => {
                if (selectedCells.length === 2 && swapsRemaining > 0) {
                    const [first, second] = selectedCells;
                    const row1 = Math.floor(first / 5);
                    const col1 = first % 5;
                    const row2 = Math.floor(second / 5);
                    const col2 = second % 5;

                    const newGrid = [...grid];
                    const temp = newGrid[row1][col1];
                    newGrid[row1][col1] = newGrid[row2][col2];
                    newGrid[row2][col2] = temp;

                    setGrid(newGrid);
                    setSelectedCells([]);
                    setSwapsRemaining(swapsRemaining - 1);
                }
            };

            // Handle submit
            const handleSubmit = React.useCallback(() => {
                console.log("Submitting grid to find words...");
                const words = findAllWords();
                console.log("Found words:", Array.from(words));
                const newScore = calculateScore(words);
                setFoundWords(words);
                setScore(newScore);
                updateHighScore(newScore);
                stopTimer();
            }, [grid]);

            // Handle share
            const handleShare = () => {
                const today = new Date();
                const dateString = today.toLocaleDateString();
                const shareText = `Word Block Puzzle ${dateString}\nScore: ${score}\nWords found: ${foundWords.size}\nTime: ${formatTime(time)}`;
                
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareText)
                        .then(() => {
                            setShareMessage('Results copied to clipboard!');
                            setShowShareToast(true);
                            setTimeout(() => setShowShareToast(false), 3000);
                        })
                        .catch(err => {
                            console.error('Could not copy text: ', err);
                            setShareMessage('Failed to copy to clipboard');
                            setShowShareToast(true);
                            setTimeout(() => setShowShareToast(false), 3000);
                        });
                } else {
                    setShareMessage('Clipboard not supported on your browser');
                    setShowShareToast(true);
                    setTimeout(() => setShowShareToast(false), 3000);
                }
            };

            // Handle reset
            const handleReset = () => {
                console.log("Resetting game...");
                const today = new Date();
                const seed = generateDailySeed(today);
                const newGrid = Array(5).fill().map(() => Array(5).fill(''));
                
                let seedOffset = 0;
                for (let i = 0; i < 5; i++) {
                    for (let j = 0; j < 5; j++) {
                        const letter = generateSeededLetter(seed + seedOffset).toUpperCase();
                        newGrid[i][j] = letter;
                        seedOffset++;
                    }
                }
                
                setGrid(newGrid);
                setSelectedCells([]);
                setFoundWords(new Set());
                setScore(0);
                setTime(0);
                setIsTimerRunning(true);
                setSwapsRemaining(5);
            };

            return (
                <div className="game-container">
                    <div className="stats">
                        <div className="stat-item">
                            <span>Time: {formatTime(time)}</span>
                        </div>
                        <div className="stat-item">
                            <span>Swapped: {selectedCells.length}/2</span>
                        </div>
                        <div className="stat-item">
                            <span>Swaps Left: {swapsRemaining}/5</span>
                        </div>
                        <div className="stat-item">
                            <span>Words: {foundWords.size}</span>
                        </div>
                        <div className="stat-item">
                            <span>Score: {score}</span>
                        </div>
                        <div className="stat-item">
                            <span>High Score: {highScore}</span>
                        </div>
                    </div>

                    <div className="grid">
                        {grid.map((row, rowIndex) => (
                            <div key={rowIndex} className="row">
                                {row.map((cell, colIndex) => (
                                    <div
                                        key={`${rowIndex}-${colIndex}`}
                                        className={`cell ${selectedCells.includes(rowIndex * 5 + colIndex) ? 'selected' : ''}`}
                                        onClick={() => handleCellClick(rowIndex, colIndex)}
                                    >
                                        {cell}
                                    </div>
                                ))}
                            </div>
                        ))}
                    </div>

                    <div className="controls">
                        <button onClick={handleSwap} disabled={selectedCells.length !== 2 || swapsRemaining <= 0}>
                            Swap
                        </button>
                        <button onClick={handleSubmit} disabled={selectedCells.length !== 0}>
                            Submit
                        </button>
                        <button onClick={handleReset}>Reset</button>
                        <button onClick={handleShare} disabled={foundWords.size === 0}>
                            Share
                        </button>
                    </div>

                    {showShareToast && 
                        <div className="toast-message">
                            {shareMessage}
                        </div>
                    }

                    <div className="word-list">
                        <h3>Found Words:</h3>
                        <ul>
                            {Array.from(foundWords).sort().map((word, index) => (
                                <li key={index}>{word}</li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        }

        // Render the game
        ReactDOM.render(<WordGridGame />, document.getElementById('root'));
    </script>
</body>
</html>
