<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Block Puzzle</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2c3e50;
        }

        .game-container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 2.5rem;
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px auto;
            max-width: 400px;
        }

        .cell {
            aspect-ratio: 1;
            border: none;
            background: #f8f9fa;
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cell.locked {
            cursor: not-allowed;
            opacity: 0.9;
            background: #e9ecef;
        }

        .cell:not(.locked):hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
            background: #e9ecef;
        }

        .cell.selected:not(.locked) {
            background: #4299e1;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(66, 153, 225, 0.3);
        }

        .info-panel {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 1.1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .info-panel p {
            margin: 10px 0;
        }

        .info-panel span {
            font-weight: bold;
            color: #4299e1;
        }

        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        button {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #4299e1;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-width: 150px;
        }

        button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        button:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(66, 153, 225, 0.3);
            background: #3182ce;
        }

        .found-words {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 1.1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .found-words h3 {
            margin-top: 0;
            color: #2c3e50;
            font-weight: 600;
        }

        #foundWordsList {
            margin-top: 10px;
            line-height: 1.6;
        }

        .word {
            display: inline-block;
            padding: 4px 8px;
            margin: 2px;
            background: #e9ecef;
            border-radius: 4px;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Word Block Puzzle</h1>
        <div class="info-panel">
            <p>Remaining Swaps: <span id="swaps">5</span></p>
            <p>Score: <span id="score">0</span></p>
        </div>
        <div class="grid" id="grid"></div>
        <div class="button-container">
            <button id="submitGrid">Submit Grid</button>
            <button id="resetGame">New Game</button>
        </div>
        <div class="found-words">
            <h3>Found Words</h3>
            <div id="foundWordsList"></div>
        </div>
    </div>

    <script>
        const dictionary = new Set([
            // Add all your dictionary words here
            "yak", "yes", "yet", "you", "sure", "set", "toe", "use", "sue", "rue", "see", "sea", "sat", "rat", 
            "ate", "eat", "tea", "are", "ear", "art", "tar", "red", "bed", "bad", "yam", "yap", "yaw", "yea",
            // ... rest of the dictionary
        ]);

        let grid = [];
        let selectedCells = [];
        let remainingSwaps = 5;
        let score = 0;
        let foundWords = new Set();
        let isGridLocked = false;

        function generateLetter() {
            const vowels = 'AEIOU';
            const consonants = 'BCDFGHJKLMNPQRSTVWXYZ';
            return Math.random() < 0.3 ? 
                vowels[Math.floor(Math.random() * vowels.length)] :
                consonants[Math.floor(Math.random() * consonants.length)];
        }

        function initializeGrid() {
            grid = Array(5).fill().map(() => Array(5).fill(''));
            const gridElement = document.getElementById('grid');
            gridElement.innerHTML = '';

            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 5; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    const letter = generateLetter();
                    grid[i][j] = letter;
                    cell.textContent = letter;
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', handleCellClick);
                    gridElement.appendChild(cell);
                }
            }
        }

        function handleCellClick(event) {
            if (isGridLocked) return;
            
            const cell = event.target;
            const row = parseInt(cell.dataset.row);
            const col = parseInt(cell.dataset.col);

            if (selectedCells.length === 0) {
                selectedCells.push({row, col, element: cell});
                cell.classList.add('selected');
            } else if (selectedCells.length === 1) {
                if (remainingSwaps > 0) {
                    const firstCell = selectedCells[0];
                    if (firstCell.row === row && firstCell.col === col) {
                        firstCell.element.classList.remove('selected');
                        selectedCells = [];
                    } else {
                        const temp = grid[firstCell.row][firstCell.col];
                        grid[firstCell.row][firstCell.col] = grid[row][col];
                        grid[row][col] = temp;

                        firstCell.element.textContent = grid[firstCell.row][firstCell.col];
                        cell.textContent = grid[row][col];

                        firstCell.element.classList.remove('selected');
                        remainingSwaps--;
                        document.getElementById('swaps').textContent = remainingSwaps;
                        selectedCells = [];
                    }
                }
            }
        }

        function findAllWords() {
            const words = new Set();
            const directions = [
                [0, 1],   // right
                [1, 0],   // down
                [1, 1],   // diagonal down-right
                [-1, 1],  // diagonal up-right
                [0, -1],  // left
                [-1, 0],  // up
                [-1, -1], // diagonal up-left
                [1, -1]   // diagonal down-left
            ];

            function checkWord(startRow, startCol, dx, dy) {
                let word = '';
                let r = startRow;
                let c = startCol;

                // Build word up to 5 letters
                while (word.length < 5 && r >= 0 && r < 5 && c >= 0 && c < 5) {
                    word += grid[r][c];
                    
                    // Check if current word length is valid (3-5 letters)
                    if (word.length >= 3) {
                        const wordLower = word.toLowerCase();
                        if (dictionary.has(wordLower)) {
                            console.log(`Found word: ${word} at [${startRow},${startCol}] direction [${dx},${dy}]`);
                            words.add(wordLower.toUpperCase());
                        }
                    }
                    
                    r += dx;
                    c += dy;
                }
            }

            // Check all positions and directions
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    for (const [dx, dy] of directions) {
                        checkWord(row, col, dx, dy);
                    }
                }
            }

            console.log('All found words:', Array.from(words));
            return words;
        }

        function calculateScore(words) {
            return Array.from(words).reduce((total, word) => {
                const points = Math.pow(2, word.length - 3);
                console.log(`Word: ${word}, Length: ${word.length}, Points: ${points}`);
                return total + points;
            }, 0);
        }

        function updateFoundWords(words) {
            const wordsList = document.getElementById('foundWordsList');
            const sortedWords = Array.from(words).sort((a, b) => {
                if (a.length !== b.length) return a.length - b.length;
                return a.localeCompare(b);
            });
            wordsList.innerHTML = sortedWords.map(word => 
                `<span class="word">${word} (${Math.pow(2, word.length - 3)} pts)</span>`
            ).join(' ');
        }

        document.getElementById('submitGrid').addEventListener('click', () => {
            const words = findAllWords();
            foundWords = words;
            score = calculateScore(words);
            document.getElementById('score').textContent = score;
            updateFoundWords(words);
            
            // Lock the grid
            isGridLocked = true;
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.add('locked');
            });
            document.getElementById('submitGrid').disabled = true;
        });

        document.getElementById('resetGame').addEventListener('click', () => {
            remainingSwaps = 5;
            score = 0;
            foundWords.clear();
            isGridLocked = false;
            document.getElementById('swaps').textContent = remainingSwaps;
            document.getElementById('score').textContent = score;
            document.getElementById('foundWordsList').innerHTML = '';
            document.getElementById('submitGrid').disabled = false;
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('locked');
            });
            initializeGrid();
        });

        // Initialize the game
        initializeGrid();
    </script>
</body>
</html>
